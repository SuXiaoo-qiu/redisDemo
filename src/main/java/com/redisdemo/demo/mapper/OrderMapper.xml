<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE  mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.redisdemo.demo.dao.OrderMapper">
    <resultMap id="BaseResultMap" type="com.redisdemo.demo.vo.OrderVO">
        <result column="id" property="id" />
        <result column="price" property="price" />
        <result column="order_details" property="orderDetails" />
        <result column="departure_city" property="departureCity" />
        <result column="arrive_city" property="arriveCity" />
        <result column="passengers" property="passengers" />
        <result column="start_time" property="startTime" />
        <result column="end_time" property="endTime" />
    </resultMap>  

    <!-- 表字段 -->
    <sql id="baseColumns">
          id
        , price
        , order_details
        , departure_city
        , arrive_city
        , passengers
        , start_time
        , end_time
     </sql> 

    <!-- 分页查询全部 -->
    <select id="getPage" resultMap="BaseResultMap">
        SELECT         
        	<include refid="baseColumns" />
        FROM `order`
        <where>
        		       		          
		<if test="null != price and null != price and '' != price">
                    and  price=#{price}
        </if>
              		          
		<if test="null != orderDetails and null != orderDetails and '' != orderDetails">
                    and  order_details=#{orderDetails}
        </if>
              		          
		<if test="null != departureCity and null != departureCity and '' != departureCity">
                    and  departure_city=#{departureCity}
        </if>
              		          
		<if test="null != arriveCity and null != arriveCity and '' != arriveCity">
                    and  arrive_city=#{arriveCity}
        </if>
              		          
		<if test="null != passengers and null != passengers and '' != passengers">
                    and  passengers=#{passengers}
        </if>
              		          
		<if test="null != startTime and null != startTime and '' != startTime">
                    and  start_time=#{startTime}
        </if>
              		          
		<if test="null != endTime and null != endTime and '' != endTime">
                    and  end_time=#{endTime}
        </if>
                     
       </where>
			order by id desc
    </select>
    
        <!-- 不分页查询全部 -->
    <select id="getAll" resultMap="BaseResultMap">
        SELECT         
        	<include refid="baseColumns" />
        FROM `order`
        <where>
        		       		          
		<if test="null != price and null != price and '' != price">
                    and  price=#{price}
        </if>
              		          
		<if test="null != orderDetails and null != orderDetails and '' != orderDetails">
                    and  order_details=#{orderDetails}
        </if>
              		          
		<if test="null != departureCity and null != departureCity and '' != departureCity">
                    and  departure_city=#{departureCity}
        </if>
              		          
		<if test="null != arriveCity and null != arriveCity and '' != arriveCity">
                    and  arrive_city=#{arriveCity}
        </if>
              		          
		<if test="null != passengers and null != passengers and '' != passengers">
                    and  passengers=#{passengers}
        </if>
              		          
		<if test="null != startTime and null != startTime and '' != startTime">
                    and  start_time=#{startTime}
        </if>
              		          
		<if test="null != endTime and null != endTime and '' != endTime">
                    and  end_time=#{endTime}
        </if>
                     
       </where>
			order by id desc
    </select>


    <!-- 根据主键获取单条记录 -->
    <select id="getById"      resultType="com.redisdemo.demo.entity.Order"  parameterType="Integer">
        SELECT <include refid="baseColumns"/> FROM `order` WHERE id = #{id}
    </select>
    

    <!-- 插入全部字段 -->
    <insert id="add" parameterType="com.redisdemo.demo.dto.OrderDTO"  keyProperty="id" keyColumn="id" useGeneratedKeys="true">
        INSERT INTO `order`
        <trim prefix="(" suffix=")" suffixOverrides=",">	
        
           id,        
          price,        
          order_details,        
          departure_city,        
          arrive_city,        
          passengers,        
          start_time,        
          end_time,        
            
        </trim>
        
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">            
           #{id},         
 		   #{price},         
 		   #{orderDetails},         
 		   #{departureCity},         
 		   #{arriveCity},         
 		   #{passengers},         
 		   #{startTime},         
 		   #{endTime},         
 		 	    </trim>
        
   		</insert>


    <!-- 更新,更新全部字段 -->
    <update id="updateById" parameterType="com.redisdemo.demo.dto.OrderDTO">
    
        UPDATE `order`
         <set>                                 
        		<if test="null != price and null != price and '' != price">
                 price=#{price}, 
       		 </if>
        
                                
        		<if test="null != orderDetails and null != orderDetails and '' != orderDetails">
                 order_details=#{orderDetails}, 
       		 </if>
        
                                
        		<if test="null != departureCity and null != departureCity and '' != departureCity">
                 departure_city=#{departureCity}, 
       		 </if>
        
                                
        		<if test="null != arriveCity and null != arriveCity and '' != arriveCity">
                 arrive_city=#{arriveCity}, 
       		 </if>
        
                                
        		<if test="null != passengers and null != passengers and '' != passengers">
                 passengers=#{passengers}, 
       		 </if>
        
                                
        		<if test="null != startTime and null != startTime and '' != startTime">
                 start_time=#{startTime}, 
       		 </if>
        
                                
        		<if test="null != endTime and null != endTime and '' != endTime">
                 end_time=#{endTime}, 
       		 </if>
        
                        </set> WHERE  id = #{id}
     
    </update>  



    <!-- 根据主键删除记录批量 -->
	<delete id="deleteByIds">
		delete from `order` where id in
		<foreach item="id" collection="array" open="(" separator="," close=")">
			#{id}
		</foreach>
	</delete>

    <!-- 根据主键删除记录 -->
	<delete id="delete">
		delete from `order` where   id = #{id}
	</delete>




</mapper>